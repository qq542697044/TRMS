{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-4f84bba6\"],{\"58cd\":function(e,t,a){\"use strict\";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{attrs:{id:\"userc\"}},[a(\"el-row\",{attrs:{gutter:20}},[a(\"el-col\",{attrs:{xs:24,md:4}},[a(\"el-input\",{staticClass:\"searchUserBox\",attrs:{placeholder:\"输入用户名搜索\"},model:{value:e.searchUser,callback:function(t){e.searchUser=t},expression:\"searchUser\"}})],1),a(\"el-col\",{attrs:{xs:24,md:6,\"hidden-lg-and-down\":\"\"}},[a(\"el-button-group\",[a(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-search\"},on:{click:e.queryUser}},[e._v(\"搜索\")]),a(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-edit\"},on:{click:function(t){return e.centerDialogOpen(\"edit\")}}},[e._v(\"编辑\")]),a(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-delete\"},on:{click:function(t){return e.centerDialogOpen(\"delete\")}}},[e._v(\"删除\")])],1)],1)],1),a(\"el-dialog\",{attrs:{title:e.centerDialogTitle,visible:e.centerDialogVisible,width:\"30%\",center:\"\",\"destroy-on-close\":\"\"},on:{\"update:visible\":function(t){e.centerDialogVisible=t}}},[a(\"el-form\",{ref:\"dialogData\",staticClass:\"input-centerdialog-box\",attrs:{rules:e.rules,model:e.dialogData,\"status-icon\":\"\"}},[a(\"el-form-item\",{attrs:{prop:\"userName\"}},[a(\"el-input\",{attrs:{placeholder:\"请输入用户名\"},model:{value:e.dialogData.userName,callback:function(t){e.$set(e.dialogData,\"userName\",t)},expression:\"dialogData.userName\"}})],1),\"删除用户\"!=e.centerDialogTitle?a(\"div\",{staticClass:\"black-space-30\"}):e._e(),\"删除用户\"!=e.centerDialogTitle?a(\"el-form-item\",[a(\"el-input\",{attrs:{placeholder:\"设置用户管辖范围\"},model:{value:e.dialogData.userLoc,callback:function(t){e.$set(e.dialogData,\"userLoc\",t)},expression:\"dialogData.userLoc\"}})],1):e._e()],1),a(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"el-button\",{on:{click:e.centerDialogClose}},[e._v(\"取 消\")]),a(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.dialogSubmit(\"dialogData\")}}},[e._v(\"确 定\")])],1)],1),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.tableLoading,expression:\"tableLoading\"}],staticStyle:{width:\"100%\"},attrs:{data:e.tableData.item,border:\"\",\"max-height\":\"430\"},on:{\"selection-change\":e.handleSelectionChange}},[a(\"el-table-column\",{attrs:{prop:\"id\",label:\"编号\",width:\"160\",sortable:\"\"}}),a(\"el-table-column\",{attrs:{prop:\"userName\",label:\"用户名\",width:\"240\"}}),a(\"el-table-column\",{attrs:{prop:\"userPhone\",label:\"联系方式\",width:\"240\"}}),a(\"el-table-column\",{attrs:{prop:\"userType\",label:\"用户类型\",width:\"120\",filters:[{text:\"普通用户\",value:\"普通用户\"},{text:\"管理员\",value:\"管理员\"}],\"filter-method\":e.filterHandler}}),a(\"el-table-column\",{attrs:{prop:\"userLoc\",label:\"管辖范围\"}}),a(\"el-table-column\",{attrs:{label:\"操作\",width:\"120\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-tooltip\",{staticClass:\"item\",attrs:{effect:\"light\",content:\" 该操作不可逆！！\",placement:\"bottom\"}},[a(\"el-button\",{attrs:{type:\"管理员\"==t.row.userType?\"danger\":\"success\",size:\"small\"},on:{click:function(a){return e.setUser(t.row)}}},[e._v(e._s(\"管理员\"==t.row.userType?\"取消\":\"设为\")+\"管理员\")])],1)]}}])})],1)],1)},l=[],r=(a(\"d3b7\"),a(\"ddb0\"),a(\"750b\")),n=a(\"b775\");function c(e){return n[\"a\"].request({method:\"post\",url:\"/manage/search_users\",data:e})}function s(e){return n[\"a\"].request({method:\"post\",url:\"/manage/update_user\",data:e})}function i(e){return n[\"a\"].request({method:\"post\",url:\"/manage/delete_user\",data:e})}function u(e){return n[\"a\"].request({method:\"post\",url:\"/manage/operate_admin\",data:e})}var d={name:\"userc\",setup:function(e,t){t.root;var a=t.refs,o=Object(r[\"e\"])(!1),l=Object(r[\"e\"])(\"\"),n=function(e){o.value=!0,l.value=\"edit\"==e?\"更新用户信息\":\"删除用户\"},d=function(){o.value=!1},p=Object(r[\"d\"])({userName:\"\",userLoc:\"\"}),f=function(){p.userName=\"\",p.userLoc=\"\"};Object(r[\"f\"])((function(){return l.value}),(function(){f()}));var m=function(e,t,a){var o=/^[a-zA-Z0-9]{3,15}$/;return\"\"===t?a(new Error(\"用户名不能为空\")):o.test(t)?void a():a(new Error(\"用户名格式有误\"))},b=Object(r[\"d\"])({userName:[{validator:m,trigger:\"blur\"}]}),g=function(e){a[e].validate((function(e){e&&(console.log(l),\"删除用户\"==l.value?x():k())}))},v=Object(r[\"e\"])(!1),h=Object(r[\"d\"])({item:[{id:\"1\",userName:\"xhy\",userPhone:\"123\",userType:\"管理员\",userLoc:\"dsd\"}]}),D=Object(r[\"e\"])(0),y=Object(r[\"d\"])([]),w=function(e){y.values=e},N=Object(r[\"e\"])(\"\"),_=function(e,t,a){var o=a[\"property\"];return t[o]===e},O=function(){var e={userName:N.value,pageNumber:\"1\",pageSize:\"100\"};v.value=!0,c(e).then((function(e){var t=e.data.data.data;D.value=e.data.data.total,console.log(t),h.item=t,v.value=!1})).catch((function(e){console.log(\"用户查询失败\"),v.value=!1}))},k=function(){var e={userName:p.userName,userLoc:p.userLoc};s(e).then((function(e){o.value=!1,console.log(\"设置管辖范围成功\"),O()})).catch((function(e){console.log(\"设置失败\")}))},x=function(){var e={userName:p.userName};i(e).then((function(e){o.value=!1,console.log(\"删除用户成功\"),console.log(e),O()})).catch((function(e){console.log(\"删除用户失败\")}))},j=function(e){var t={userName:e.userName,controlType:\"管理员\"==e.userType?\"cancel\":\"set\"};u(t).then((function(e){console.log(\"操作成功\"),O()})).catch((function(e){console.log(\"操作失败\")}))};return Object(r[\"c\"])((function(){O()})),{searchUser:N,centerDialogVisible:o,centerDialogTitle:l,dialogData:p,tableLoading:v,total:D,tableData:h,multipleSelection:y,rules:b,handleSelectionChange:w,filterHandler:_,centerDialogClose:d,centerDialogOpen:n,queryUser:O,updateUser:k,deleteUser:x,setUser:j,dialogSubmit:g}}},p=d,f=(a(\"5af3\"),a(\"2877\")),m=Object(f[\"a\"])(p,o,l,!1,null,\"1e30037a\",null);t[\"default\"]=m.exports},\"5af3\":function(e,t,a){\"use strict\";var o=a(\"cee45\"),l=a.n(o);l.a},cee45:function(e,t,a){}}]);","extractedComments":[]}