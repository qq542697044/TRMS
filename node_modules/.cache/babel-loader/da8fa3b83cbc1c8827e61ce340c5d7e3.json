{"remainingRequest":"E:\\Github\\code\\TRMS\\node_modules\\babel-loader\\lib\\index.js!E:\\Github\\code\\TRMS\\src\\utils\\request.js","dependencies":[{"path":"E:\\Github\\code\\TRMS\\src\\utils\\request.js","mtime":1584970991286},{"path":"E:\\Github\\code\\TRMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Github\\code\\TRMS\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gImVsZW1lbnQtdWkiOwppbXBvcnQgeyBnZXR1c2VyTmFtZSwgZ2V0VG9rZW4gfSBmcm9tICJAL3V0aWxzL2Nvb2tpZS5qcyI7IC8v5Yib5bu6YXhpb3PvvIzotYvnu5nlj5jph49zZXJ2aWNlCi8v5pyN5Yqh56uv6K+35rGC5Zyw5Z2ALOWcsOWdgO+8mgoKdmFyIEJBU0VVUkwgPSAiL2FwaSI7CnZhciBzZXJ2aWNlID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiBCQVNFVVJMLAogIHRpbWVvdXQ6IDYwMDAsCiAgd2l0aENyZWRlbnRpYWxzOiB0cnVlCn0pOwpzZXJ2aWNlLmRlZmF1bHRzLmhlYWRlcnMucG9zdFsiQ29udGVudC1UeXBlIl0gPSAiYXBwbGljYXRpb24vanNvbiI7IC8vIEFkZCBhIHJlcXVlc3QgaW50ZXJjZXB0b3IKCnNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICAvLyBEbyBzb21ldGhpbmcgYmVmb3JlIHJlcXVlc3QgaXMgc2VudAogIGNvbmZpZy5oZWFkZXJzWyJ0b2tlbiJdID0gZ2V0VG9rZW4oKTsKICBjb25maWcuaGVhZGVyc1sidXNlck5hbWUiXSA9IGdldHVzZXJOYW1lKCk7CiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgLy8gRG8gc29tZXRoaW5nIHdpdGggcmVxdWVzdCBlcnJvcgogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOyAvLyBBZGQgYSByZXNwb25zZSBpbnRlcmNlcHRvcgoKc2VydmljZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIC8vIERvIHNvbWV0aGluZyB3aXRoIHJlc3BvbnNlIGRhdGEKICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CgogIGlmIChkYXRhLnJlc2NvZGUgPT0gMCkgewogICAgTWVzc2FnZS5lcnJvcihkYXRhLm1lc3NhZ2UpOwogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGRhdGEpOwogIH0gZWxzZSB7CiAgICBpZiAoZGF0YS5tZXNzYWdlICE9ICIiKSB7CiAgICAgIE1lc3NhZ2UoewogICAgICAgIG1lc3NhZ2U6IGRhdGEubWVzc2FnZSwKICAgICAgICB0eXBlOiAic3VjY2VzcyIKICAgICAgfSk7CiAgICB9CgogICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXNwb25zZSk7CiAgfQp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICBpZiAoZXJyb3IuY29kZSA9PT0gIkVDT05OQUJPUlRFRCIgJiYgZXJyb3IubWVzc2FnZS5pbmRleE9mKCJ0aW1lb3V0IikgIT09IC0xKSB7CiAgICBNZXNzYWdlLmVycm9yKCLmnI3liqHlmajov57mjqXotoXml7YiKTsKICB9IC8vIERvIHNvbWV0aGluZyB3aXRoIHJlc3BvbnNlIGVycm9yCgoKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKZXhwb3J0IGRlZmF1bHQgc2VydmljZTs="},{"version":3,"sources":["E:/Github/code/TRMS/src/utils/request.js"],"names":["axios","Message","getuserName","getToken","BASEURL","service","create","baseURL","timeout","withCredentials","defaults","headers","post","interceptors","request","use","config","error","Promise","reject","response","data","rescode","message","type","resolve","code","indexOf"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,YAAxB;AACA,SAASC,WAAT,EAAsBC,QAAtB,QAAsC,mBAAtC,C,CAEA;AACA;;AACA,IAAMC,OAAO,GAAG,MAAhB;AAEA,IAAMC,OAAO,GAAGL,KAAK,CAACM,MAAN,CAAa;AACzBC,EAAAA,OAAO,EAAEH,OADgB;AAEzBI,EAAAA,OAAO,EAAE,IAFgB;AAGzBC,EAAAA,eAAe,EAAE;AAHQ,CAAb,CAAhB;AAKAJ,OAAO,CAACK,QAAR,CAAiBC,OAAjB,CAAyBC,IAAzB,CAA8B,cAA9B,IAAgD,kBAAhD,C,CACA;;AACAP,OAAO,CAACQ,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CACI,UAASC,MAAT,EAAiB;AACb;AACAA,EAAAA,MAAM,CAACL,OAAP,CAAe,OAAf,IAA0BR,QAAQ,EAAlC;AACAa,EAAAA,MAAM,CAACL,OAAP,CAAe,UAAf,IAA6BT,WAAW,EAAxC;AACA,SAAOc,MAAP;AACH,CANL,EAOI,UAASC,KAAT,EAAgB;AACZ;AACA,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CAVL,E,CAaA;;AACAZ,OAAO,CAACQ,YAAR,CAAqBO,QAArB,CAA8BL,GAA9B,CACI,UAASK,QAAT,EAAmB;AACf;AACA,MAAIC,IAAI,GAAGD,QAAQ,CAACC,IAApB;;AACA,MAAIA,IAAI,CAACC,OAAL,IAAgB,CAApB,EAAuB;AACnBrB,IAAAA,OAAO,CAACgB,KAAR,CAAcI,IAAI,CAACE,OAAnB;AACA,WAAOL,OAAO,CAACC,MAAR,CAAeE,IAAf,CAAP;AACH,GAHD,MAGO;AACH,QAAIA,IAAI,CAACE,OAAL,IAAgB,EAApB,EAAwB;AACpBtB,MAAAA,OAAO,CAAC;AACJsB,QAAAA,OAAO,EAAEF,IAAI,CAACE,OADV;AAEJC,QAAAA,IAAI,EAAE;AAFF,OAAD,CAAP;AAIH;;AACD,WAAON,OAAO,CAACO,OAAR,CAAgBL,QAAhB,CAAP;AACH;AACJ,CAhBL,EAiBI,UAASH,KAAT,EAAgB;AACZ,MACIA,KAAK,CAACS,IAAN,KAAe,cAAf,IACAT,KAAK,CAACM,OAAN,CAAcI,OAAd,CAAsB,SAAtB,MAAqC,CAAC,CAF1C,EAGE;AACE1B,IAAAA,OAAO,CAACgB,KAAR,CAAc,SAAd;AACH,GANW,CAOZ;;;AACA,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CA1BL;AA6BA,eAAeZ,OAAf","sourcesContent":["import axios from \"axios\";\r\nimport { Message } from \"element-ui\";\r\nimport { getuserName, getToken } from \"@/utils/cookie.js\";\r\n\r\n//创建axios，赋给变量service\r\n//服务端请求地址,地址：\r\nconst BASEURL = \"/api\";\r\n\r\nconst service = axios.create({\r\n    baseURL: BASEURL,\r\n    timeout: 6000,\r\n    withCredentials: true\r\n});\r\nservice.defaults.headers.post[\"Content-Type\"] = \"application/json\";\r\n// Add a request interceptor\r\nservice.interceptors.request.use(\r\n    function(config) {\r\n        // Do something before request is sent\r\n        config.headers[\"token\"] = getToken();\r\n        config.headers[\"userName\"] = getuserName();\r\n        return config;\r\n    },\r\n    function(error) {\r\n        // Do something with request error\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\n// Add a response interceptor\r\nservice.interceptors.response.use(\r\n    function(response) {\r\n        // Do something with response data\r\n        let data = response.data;\r\n        if (data.rescode == 0) {\r\n            Message.error(data.message);\r\n            return Promise.reject(data);\r\n        } else {\r\n            if (data.message != \"\") {\r\n                Message({\r\n                    message: data.message,\r\n                    type: \"success\"\r\n                });\r\n            }\r\n            return Promise.resolve(response);\r\n        }\r\n    },\r\n    function(error) {\r\n        if (\r\n            error.code === \"ECONNABORTED\" &&\r\n            error.message.indexOf(\"timeout\") !== -1\r\n        ) {\r\n            Message.error(\"服务器连接超时\");\r\n        }\r\n        // Do something with response error\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\nexport default service;"]}]}