{"remainingRequest":"E:\\Github\\code\\TRMS\\node_modules\\babel-loader\\lib\\index.js!E:\\Github\\code\\TRMS\\src\\store\\moudels\\login.js","dependencies":[{"path":"E:\\Github\\code\\TRMS\\src\\store\\moudels\\login.js","mtime":1584623859487},{"path":"E:\\Github\\code\\TRMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Github\\code\\TRMS\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCB7IExvZ2luIH0gZnJvbSAiQC9hcGkvbG9naW4iOwppbXBvcnQgeyBzZXRUb2tlbiwgc2V0dXNlckxvYywgc2V0dXNlck5hbWUsIGdldHVzZXJOYW1lLCBnZXR1c2VyTG9jIH0gZnJvbSAiLi4vLi4vdXRpbHMvY29va2llIjsKaW1wb3J0IHsgc2V0IH0gZnJvbSAiY29va2llX2pzIjsgLy/nmbvlvZXmqKHlnZcKCnZhciBzdGF0ZSA9IHsKICB0b0tlbjogIiIsCiAgdXNlck5hbWU6IGdldHVzZXJOYW1lKCkgfHwgIiIsCiAgdXNlckxvYzogZ2V0dXNlckxvYygpIHx8ICIiLAogIG1vZHVsZTogbG9jYWxTdG9yYWdlLmdldEl0ZW0oIm1vZHVsZSIpIHx8ICJ1c2VyIgp9Owp2YXIgbXV0YXRpb25zID0gewogIFNFVF9UT0tFTjogZnVuY3Rpb24gU0VUX1RPS0VOKHN0YXRlLCB2YWx1ZSkgewogICAgc3RhdGUudG9LZW4gPSB2YWx1ZTsKICB9LAogIFNFVF9VU0VSTkFNRTogZnVuY3Rpb24gU0VUX1VTRVJOQU1FKHN0YXRlLCB2YWx1ZSkgewogICAgc3RhdGUudXNlck5hbWUgPSB2YWx1ZTsKICB9LAogIFNFVF9VU0VSTE9DOiBmdW5jdGlvbiBTRVRfVVNFUkxPQyhzdGF0ZSwgdmFsdWUpIHsKICAgIHN0YXRlLnVzZXJMb2MgPSB2YWx1ZTsKICB9LAogIFNFVF9NT0RVTEU6IGZ1bmN0aW9uIFNFVF9NT0RVTEUoc3RhdGUsIHZhbHVlKSB7CiAgICBzdGF0ZS5tb2R1bGUgPSB2YWx1ZTsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihjb250ZW50LCByZXF1ZXN0RGF0YSkgewogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgLy/mjqXlj6MKICAgICAgTG9naW4ocmVxdWVzdERhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgICAgY29udGVudC5jb21taXQoIlNFVF9VU0VSTkFNRSIsIHJlcXVlc3REYXRhLnVzZXJOYW1lKTsKICAgICAgICBjb250ZW50LmNvbW1pdCgiU0VUX1RPS0VOIiwgZGF0YS50b2tlbik7CiAgICAgICAgY29udGVudC5jb21taXQoIlNFVF9VU0VSTE9DIiwgZGF0YS51c2VyTG9jKTsKICAgICAgICBzZXRUb2tlbihkYXRhLnRva2VuKTsKICAgICAgICBzZXR1c2VyTG9jKGRhdGEudXNlckxvYyk7CiAgICAgICAgc2V0dXNlck5hbWUocmVxdWVzdERhdGEudXNlck5hbWUpOwogICAgICAgIHJlc29sdmUocmVzcG9uc2UpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgc2V0TW9kdWxlOiBmdW5jdGlvbiBzZXRNb2R1bGUoY29udGVudCwgdmFsdWUpIHsKICAgIHJldHVybiBjb250ZW50LmNvbW1pdCgiU0VUX01PRFVMRSIsIHZhbHVlKTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIGFjdGlvbnM6IGFjdGlvbnMsCiAgc3RhdGU6IHN0YXRlLAogIG11dGF0aW9uczogbXV0YXRpb25zCn07"},{"version":3,"sources":["E:/Github/code/TRMS/src/store/moudels/login.js"],"names":["Login","setToken","setuserLoc","setuserName","getuserName","getuserLoc","set","state","toKen","userName","userLoc","module","localStorage","getItem","mutations","SET_TOKEN","value","SET_USERNAME","SET_USERLOC","SET_MODULE","actions","login","content","requestData","Promise","resolve","reject","then","response","data","commit","token","catch","error","setModule","namespaced"],"mappings":";AAAA,SAASA,KAAT,QAAsB,aAAtB;AACA,SACIC,QADJ,EAEIC,UAFJ,EAGIC,WAHJ,EAIIC,WAJJ,EAKIC,UALJ,QAMO,oBANP;AAOA,SAAQC,GAAR,QAAmB,WAAnB,C,CAEA;;AACA,IAAMC,KAAK,GAAG;AACVC,EAAAA,KAAK,EAAE,EADG;AAEVC,EAAAA,QAAQ,EAAEL,WAAW,MAAM,EAFjB;AAGVM,EAAAA,OAAO,EAAEL,UAAU,MAAM,EAHf;AAIVM,EAAAA,MAAM,EAAEC,YAAY,CAACC,OAAb,CAAqB,QAArB,KAAkC;AAJhC,CAAd;AAOA,IAAMC,SAAS,GAAG;AACdC,EAAAA,SADc,qBACJR,KADI,EACGS,KADH,EACU;AACpBT,IAAAA,KAAK,CAACC,KAAN,GAAcQ,KAAd;AACH,GAHa;AAIdC,EAAAA,YAJc,wBAIDV,KAJC,EAIMS,KAJN,EAIa;AACvBT,IAAAA,KAAK,CAACE,QAAN,GAAiBO,KAAjB;AACH,GANa;AAOdE,EAAAA,WAPc,uBAOFX,KAPE,EAOKS,KAPL,EAOY;AACtBT,IAAAA,KAAK,CAACG,OAAN,GAAgBM,KAAhB;AACH,GATa;AAUdG,EAAAA,UAVc,sBAUHZ,KAVG,EAUIS,KAVJ,EAUW;AACrBT,IAAAA,KAAK,CAACI,MAAN,GAAeK,KAAf;AACH;AAZa,CAAlB;AAeA,IAAMI,OAAO,GAAG;AACZC,EAAAA,KADY,iBACNC,OADM,EACGC,WADH,EACgB;AACxB,WAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpC;AACA1B,MAAAA,KAAK,CAACuB,WAAD,CAAL,CACKI,IADL,CACU,UAAAC,QAAQ,EAAI;AACd,YAAIC,IAAI,GAAGD,QAAQ,CAACC,IAAT,CAAcA,IAAzB;AACAP,QAAAA,OAAO,CAACQ,MAAR,CAAe,cAAf,EAA+BP,WAAW,CAACd,QAA3C;AACAa,QAAAA,OAAO,CAACQ,MAAR,CAAe,WAAf,EAA4BD,IAAI,CAACE,KAAjC;AACAT,QAAAA,OAAO,CAACQ,MAAR,CAAe,aAAf,EAA8BD,IAAI,CAACnB,OAAnC;AACAT,QAAAA,QAAQ,CAAC4B,IAAI,CAACE,KAAN,CAAR;AACA7B,QAAAA,UAAU,CAAC2B,IAAI,CAACnB,OAAN,CAAV;AACAP,QAAAA,WAAW,CAACoB,WAAW,CAACd,QAAb,CAAX;AACAgB,QAAAA,OAAO,CAACG,QAAD,CAAP;AACH,OAVL,EAWKI,KAXL,CAWW,UAAAC,KAAK,EAAI;AACZP,QAAAA,MAAM,CAACO,KAAD,CAAN;AACH,OAbL;AAcH,KAhBM,CAAP;AAiBH,GAnBW;AAoBZC,EAAAA,SApBY,qBAoBFZ,OApBE,EAoBON,KApBP,EAoBc;AACtB,WAAOM,OAAO,CAACQ,MAAR,CAAe,YAAf,EAA6Bd,KAA7B,CAAP;AACH;AAtBW,CAAhB;AAyBA,eAAe;AACXmB,EAAAA,UAAU,EAAE,IADD;AAEXf,EAAAA,OAAO,EAAPA,OAFW;AAGXb,EAAAA,KAAK,EAALA,KAHW;AAIXO,EAAAA,SAAS,EAATA;AAJW,CAAf","sourcesContent":["import { Login } from \"@/api/login\";\r\nimport {\r\n    setToken,\r\n    setuserLoc,\r\n    setuserName,\r\n    getuserName,\r\n    getuserLoc\r\n} from \"../../utils/cookie\";\r\nimport {set } from \"cookie_js\";\r\n\r\n//登录模块\r\nconst state = {\r\n    toKen: \"\",\r\n    userName: getuserName() || \"\",\r\n    userLoc: getuserLoc() || \"\",\r\n    module: localStorage.getItem(\"module\") || \"user\"\r\n};\r\n\r\nconst mutations = {\r\n    SET_TOKEN(state, value) {\r\n        state.toKen = value;\r\n    },\r\n    SET_USERNAME(state, value) {\r\n        state.userName = value;\r\n    },\r\n    SET_USERLOC(state, value) {\r\n        state.userLoc = value;\r\n    },\r\n    SET_MODULE(state, value) {\r\n        state.module = value;\r\n    }\r\n};\r\n\r\nconst actions = {\r\n    login(content, requestData) {\r\n        return new Promise((resolve, reject) => {\r\n            //接口\r\n            Login(requestData)\r\n                .then(response => {\r\n                    let data = response.data.data;\r\n                    content.commit(\"SET_USERNAME\", requestData.userName);\r\n                    content.commit(\"SET_TOKEN\", data.token);\r\n                    content.commit(\"SET_USERLOC\", data.userLoc);\r\n                    setToken(data.token);\r\n                    setuserLoc(data.userLoc);\r\n                    setuserName(requestData.userName);\r\n                    resolve(response);\r\n                })\r\n                .catch(error => {\r\n                    reject(error);\r\n                });\r\n        });\r\n    },\r\n    setModule(content, value) {\r\n        return content.commit(\"SET_MODULE\", value);\r\n    }\r\n};\r\n\r\nexport default {\r\n    namespaced: true,\r\n    actions,\r\n    state,\r\n    mutations\r\n};"]}]}