{"remainingRequest":"E:\\Github\\code\\TRMS\\node_modules\\babel-loader\\lib\\index.js!E:\\Github\\code\\TRMS\\src\\utils\\request.js","dependencies":[{"path":"E:\\Github\\code\\TRMS\\src\\utils\\request.js","mtime":1583560584521},{"path":"E:\\Github\\code\\TRMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Github\\code\\TRMS\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gJ2VsZW1lbnQtdWknOwppbXBvcnQgeyBnZXR1c2VyTmFtZSwgZ2V0VG9rZW4gfSBmcm9tICdAL3V0aWxzL2Nvb2tpZS5qcyc7IC8v5Yib5bu6YXhpb3PvvIzotYvnu5nlj5jph49zZXJ2aWNlCi8v5pyN5Yqh56uv6K+35rGC5Zyw5Z2ALOWcsOWdgO+8mgoKdmFyIEJBU0VVUkwgPSAiL2FwaSI7CnZhciBzZXJ2aWNlID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiBCQVNFVVJMLAogIHRpbWVvdXQ6IDYwMDAKfSk7CnNlcnZpY2UuZGVmYXVsdHMuaGVhZGVycy5wb3N0WydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJzsgLy8gQWRkIGEgcmVxdWVzdCBpbnRlcmNlcHRvcgoKc2VydmljZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIC8vIERvIHNvbWV0aGluZyBiZWZvcmUgcmVxdWVzdCBpcyBzZW50CiAgY29uZmlnLmhlYWRlcnNbJ3Rva2VuJ10gPSBnZXRUb2tlbigpOwogIGNvbmZpZy5oZWFkZXJzWyd1c2VyTmFtZSddID0gZ2V0dXNlck5hbWUoKTsKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAvLyBEbyBzb21ldGhpbmcgd2l0aCByZXF1ZXN0IGVycm9yCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7IC8vIEFkZCBhIHJlc3BvbnNlIGludGVyY2VwdG9yCgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgLy8gRG8gc29tZXRoaW5nIHdpdGggcmVzcG9uc2UgZGF0YQogIHZhciBkYXRhID0gcmVzcG9uc2UuZGF0YTsKCiAgaWYgKGRhdGEucmVzY29kZSA9PSAnMCcpIHsKICAgIE1lc3NhZ2UuZXJyb3IoZGF0YS5tZXNzYWdlKTsKICAgIHJldHVybiBQcm9taXNlLnJlamVjdChkYXRhKTsKICB9IGVsc2UgewogICAgaWYgKGRhdGEubWVzc2FnZSAhPSAiIikgewogICAgICBNZXNzYWdlKHsKICAgICAgICBtZXNzYWdlOiBkYXRhLm1lc3NhZ2UsCiAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzcG9uc2UpOwogIH0KfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgaWYgKGVycm9yLmNvZGUgPT09ICdFQ09OTkFCT1JURUQnICYmIGVycm9yLm1lc3NhZ2UuaW5kZXhPZigndGltZW91dCcpICE9PSAtMSkgewogICAgTWVzc2FnZS5lcnJvcigi6K+35rGC6LaF5pe2Iik7CiAgfSAvLyBEbyBzb21ldGhpbmcgd2l0aCByZXNwb25zZSBlcnJvcgoKCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CmV4cG9ydCBkZWZhdWx0IHNlcnZpY2U7"},{"version":3,"sources":["E:/Github/code/TRMS/src/utils/request.js"],"names":["axios","Message","getuserName","getToken","BASEURL","service","create","baseURL","timeout","defaults","headers","post","interceptors","request","use","config","error","Promise","reject","response","data","rescode","message","type","resolve","code","indexOf"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,YAAxB;AACA,SAASC,WAAT,EAAsBC,QAAtB,QAAsC,mBAAtC,C,CAEA;AACA;;AACA,IAAMC,OAAO,GAAG,MAAhB;AAEA,IAAMC,OAAO,GAAGL,KAAK,CAACM,MAAN,CAAa;AACzBC,EAAAA,OAAO,EAAEH,OADgB;AAEzBI,EAAAA,OAAO,EAAE;AAFgB,CAAb,CAAhB;AAIAH,OAAO,CAACI,QAAR,CAAiBC,OAAjB,CAAyBC,IAAzB,CAA8B,cAA9B,IAAgD,kBAAhD,C,CAEA;;AACAN,OAAO,CAACO,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CAAiC,UAASC,MAAT,EAAiB;AAC9C;AACAA,EAAAA,MAAM,CAACL,OAAP,CAAe,OAAf,IAA0BP,QAAQ,EAAlC;AACAY,EAAAA,MAAM,CAACL,OAAP,CAAe,UAAf,IAA6BR,WAAW,EAAxC;AACA,SAAOa,MAAP;AACH,CALD,EAKG,UAASC,KAAT,EAAgB;AACf;AACA,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CARD,E,CAUA;;AACAX,OAAO,CAACO,YAAR,CAAqBO,QAArB,CAA8BL,GAA9B,CAAkC,UAASK,QAAT,EAAmB;AACjD;AACA,MAAIC,IAAI,GAAGD,QAAQ,CAACC,IAApB;;AACA,MAAIA,IAAI,CAACC,OAAL,IAAgB,GAApB,EAAyB;AACrBpB,IAAAA,OAAO,CAACe,KAAR,CAAcI,IAAI,CAACE,OAAnB;AACA,WAAOL,OAAO,CAACC,MAAR,CAAeE,IAAf,CAAP;AACH,GAHD,MAGO;AACH,QAAIA,IAAI,CAACE,OAAL,IAAgB,EAApB,EAAwB;AACpBrB,MAAAA,OAAO,CAAC;AACJqB,QAAAA,OAAO,EAAEF,IAAI,CAACE,OADV;AAEJC,QAAAA,IAAI,EAAE;AAFF,OAAD,CAAP;AAIH;;AACD,WAAON,OAAO,CAACO,OAAR,CAAgBL,QAAhB,CAAP;AACH;AACJ,CAfD,EAeG,UAASH,KAAT,EAAgB;AACf,MAAIA,KAAK,CAACS,IAAN,KAAe,cAAf,IAAiCT,KAAK,CAACM,OAAN,CAAcI,OAAd,CAAsB,SAAtB,MAAqC,CAAC,CAA3E,EAA8E;AAC1EzB,IAAAA,OAAO,CAACe,KAAR,CAAc,MAAd;AACH,GAHc,CAIf;;;AACA,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CArBD;AAwBA,eAAeX,OAAf","sourcesContent":["import axios from 'axios'\r\nimport { Message } from 'element-ui'\r\nimport { getuserName, getToken } from '@/utils/cookie.js'\r\n\r\n//创建axios，赋给变量service\r\n//服务端请求地址,地址：\r\nconst BASEURL = \"/api\";\r\n\r\nconst service = axios.create({\r\n    baseURL: BASEURL,\r\n    timeout: 6000,\r\n});\r\nservice.defaults.headers.post['Content-Type'] = 'application/json';\r\n\r\n// Add a request interceptor\r\nservice.interceptors.request.use(function(config) {\r\n    // Do something before request is sent\r\n    config.headers['token'] = getToken();\r\n    config.headers['userName'] = getuserName();\r\n    return config;\r\n}, function(error) {\r\n    // Do something with request error\r\n    return Promise.reject(error);\r\n});\r\n\r\n// Add a response interceptor\r\nservice.interceptors.response.use(function(response) {\r\n    // Do something with response data\r\n    let data = response.data\r\n    if (data.rescode == '0') {\r\n        Message.error(data.message);\r\n        return Promise.reject(data);\r\n    } else {\r\n        if (data.message != \"\") {\r\n            Message({\r\n                message: data.message,\r\n                type: 'success'\r\n            });\r\n        }\r\n        return Promise.resolve(response);\r\n    }\r\n}, function(error) {\r\n    if (error.code === 'ECONNABORTED' && error.message.indexOf('timeout') !== -1) {\r\n        Message.error(\"请求超时\");\r\n    }\r\n    // Do something with response error\r\n    return Promise.reject(error);\r\n});\r\n\r\n\r\nexport default service;"]}]}