{"remainingRequest":"E:\\Github\\code\\TRMS\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Github\\code\\TRMS\\src\\views\\User\\module\\resc.vue?vue&type=style&index=0&id=4a5c787c&lang=scss&scoped=true&","dependencies":[{"path":"E:\\Github\\code\\TRMS\\src\\views\\User\\module\\resc.vue","mtime":1584629749922},{"path":"E:\\Github\\code\\TRMS\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Github\\code\\TRMS\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\Github\\code\\TRMS\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\Github\\code\\TRMS\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Github\\code\\TRMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Github\\code\\TRMS\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5jYXJkLWJveCB7DQogIG1hcmdpbjogNXB4Ow0KfQ0K"},{"version":3,"sources":["resc.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2HA;AACA;AACA","file":"resc.vue","sourceRoot":"src/views/User/module","sourcesContent":["<template>\r\n  <div id=\"resc-mobile\">\r\n    <ul class=\"infinite-list\" v-infinite-scroll=\"load\"  style=\"overflow:auto\">\r\n      <li v-for=\"(item,index) in resData.item\" :key=\"item.id\">\r\n        <div class=\"float-left card-box\">\r\n          <el-card :body-style=\"{ padding: '0px',width:'250px',border:'solid 1px #f0f0f0'}\" shadow=\"hover\">\r\n            <div style=\"padding: 14px;\">\r\n                <h3>资源{{index+1}}</h3>\r\n              <div>\r\n                <el-form label-position=\"left\" inline class=\"demo-table-expand\">\r\n                  <el-form-item label=\"编号\">\r\n                    <span>{{ item.id }}</span>\r\n                  </el-form-item>\r\n                  <br />\r\n                  <el-form-item label=\"类型\">\r\n                    <span>{{ item.type }}</span>\r\n                  </el-form-item>\r\n                  <br />\r\n                  <el-form-item label=\"状态\">\r\n                    <span>{{ item.state }}</span>\r\n                  </el-form-item>\r\n                  <br />\r\n                  <el-form-item label=\"地址\">\r\n                    <span>{{ item.address }}</span>\r\n                  </el-form-item>\r\n                  <br />\r\n                  <el-form-item label=\"供应商\">\r\n                    <span>{{ item.supplier }}</span>\r\n                  </el-form-item>\r\n                </el-form>\r\n              </div>\r\n\r\n              <div class=\"bottom clearfix\">\r\n                <el-button type=\"text\" class=\"button\">操作</el-button>\r\n              </div>\r\n            </div>\r\n          </el-card>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n    <p v-if=\"pageControl.loading\">加载中...</p>\r\n    <p v-if=\"noMore\">没有更多了</p>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { ref, onMounted, reactive, computed } from \"@vue/composition-api\";\r\nexport default {\r\n  name: \"resc-mobile\",\r\n  setup(props, { root }) {\r\n    const resData = reactive({\r\n      item: []\r\n    });\r\n    //分类查询\r\n    const search_form = reactive({\r\n      type: \"\",\r\n      addr: \"\",\r\n      supplier: \"\",\r\n      id: \"\"\r\n    });\r\n    //分页\r\n    const currentPage = ref(1);\r\n    const pageSize = ref(10);\r\n    const total = ref(0);\r\n    const pageControl = reactive({\r\n      count: 10,\r\n      loading: false\r\n    });\r\n    const noMore = computed(() => pageControl.count >= total);\r\n\r\n    const disabled=computed(() => pageControl.loading || noMore.value);\r\n    const load = () => {\r\n      pageControl.loading = true;\r\n      currentPage.value+=1;\r\n      queryRes();\r\n      setTimeout(() => {\r\n        \r\n      }, 2000);\r\n    };\r\n    //查询\r\n    const queryRes = () => {\r\n      let requestData = {\r\n        type: search_form.type,\r\n        address: search_form.addr,\r\n        supplier: search_form.supplier,\r\n        id: search_form.id,\r\n        pageNumber: currentPage.value,\r\n        pageSize: pageSize.value\r\n      };\r\n      root.$store\r\n        .dispatch(\"resc/query_resource\", requestData)\r\n        .then(response => {\r\n          let Data = response.data.data.data;\r\n          /*返回时间数据格式处理 */\r\n          // resData.forEach(item=>{\r\n          //   item.createdDate=；\r\n          //   item.modifiedDate=;\r\n          // })\r\n          resData.item = Data;\r\n          total.value = response.data.data.total;\r\n          pageControl.count += pageSize.value;\r\n          pageControl.loading = false;\r\n          console.log(noMore.value)\r\n          console.log(disabled.value)\r\n        })\r\n        .catch(error => {});\r\n    };\r\n\r\n    onMounted(() => {\r\n    });\r\n    return {\r\n      noMore,\r\n      disabled,\r\n      //ref\r\n      //reactive\r\n      resData,\r\n      pageControl,\r\n      //methods\r\n      load\r\n    };\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.card-box {\r\n  margin: 5px;\r\n}\r\n</style>"]}]}